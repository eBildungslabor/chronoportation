<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Vortrag Teil 1 – Nele Hirsch</title>
  <link rel="stylesheet" href="css/pico.min.css">
</head>
<body>
  <main class="container" id="mainContainer">
    <h1>Vortrag Teil 1: KI in Bildung, Beruf und Gesellschaft</h1>
    <video
      id="vortragVideo"
      src="vortrag1.mp4"
      autoplay
      muted
      playsinline
      style="width:100%;max-width:800px;"
    >
      Dein Browser unterstützt das Video-Tag nicht.
    </video>
  </main>

  <script>
  (function() {
    "use strict";
    // --- Confetti-Kern (1:1 von CodePen) ---
    const Utils = {
      parsePx: v => parseFloat(v.replace(/px/, "")),
      getRandomInRange: (min, max, prec = 0) => {
        const m = Math.pow(10, prec);
        return Math.floor((Math.random()* (max-min) + min)*m)/m;
      },
      getRandomItem: arr => arr[Math.floor(Math.random()*arr.length)],
      getScaleFactor: () => Math.log(window.innerWidth)/Math.log(1920),
      debounce: (fn, d) => {
        let t; return (...a) => {
          clearTimeout(t);
          t = setTimeout(()=>fn(...a), d);
        };
      },
    };
    const DEG_TO_RAD = Math.PI/180;
    const defaultConfettiConfig = {
      confettiesNumber: 250,
      confettiRadius: 6,
      confettiColors: ["#fcf403","#62fc03","#f4fc03","#03e7fc","#03fca5","#a503fc","#fc03ad","#fc03c2"],
      emojies: [], svgIcon: null
    };

    class Confetti { /* … Klasse exakt wie im CodePen … */ }
    class ConfettiManager {
      constructor() {
        this.canvas = document.createElement("canvas");
        Object.assign(this.canvas.style, {
          position:"fixed",top:0,left:0,
          width:"100%",height:"100%",
          zIndex:1000,
          pointerEvents:"none"
        });
        document.body.appendChild(this.canvas);
        this.ctx = this.canvas.getContext("2d");
        this.confetti = [];
        this.lastTime = Date.now();
        window.addEventListener("resize", Utils.debounce(() => this.resize(), 200));
        this.resize();
        requestAnimationFrame(() => this.loop());
      }
      resize() {
        this.canvas.width = window.innerWidth * window.devicePixelRatio;
        this.canvas.height = window.innerHeight * window.devicePixelRatio;
      }
      addConfetti(cfg={}) {
        const c = {...defaultConfettiConfig, ...cfg};
        const baseY = (5*window.innerHeight)/7;
        for (let i=0;i<c.confettiesNumber/2;i++) {
          this.confetti.push(new Confetti({
            initialPosition:{x:0,y:baseY},
            direction:"right",
            radius:c.confettiRadius,
            colors:c.confettiColors,
            emojis:c.emojies,
            svgIcon:c.svgIcon
          }));
          this.confetti.push(new Confetti({
            initialPosition:{x:window.innerWidth,y:baseY},
            direction:"left",
            radius:c.confettiRadius,
            colors:c.confettiColors,
            emojis:c.emojies,
            svgIcon:c.svgIcon
          }));
        }
      }
      resetAndStart(cfg={}) {
        this.confetti = [];
        this.addConfetti(cfg);
      }
      loop() {
        const now = Date.now(), dt = now - this.lastTime;
        this.lastTime = now;
        this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height);
        this.confetti = this.confetti.filter(c => {
          c.updatePosition(dt, now);
          c.draw(this.ctx);
          return c.isVisible(this.canvas.height);
        });
        requestAnimationFrame(() => this.loop());
      }
    }
    // Manager global
    window.confettiManager = new ConfettiManager();
    // ─────────────────────────────────────────────

    // Direkt bei Laden: Video starten + Konfetti
    window.addEventListener('DOMContentLoaded', () => {
      const video = document.getElementById('vortragVideo');
      // Autoplay-Einschränkungen umgehen: muted + playsinline
      video.play().catch(()=>{/* falls geblockt */});
      window.confettiManager.resetAndStart();
    });
  })();
  </script>
</body>
</html>
